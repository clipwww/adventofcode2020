function day24() {
  console.time();

  const puzzle = `nenwwwnwsenwneswnwnwnwnwnw
senwwneeneeneneneenenesweneswenenene
newnwnwnwnwnwnwesenwenenwenwnwnwwnwsw
wswnesewwwnwwnewswswnesw
wnwwwwswwwwswwswswwswnesweww
esenwneswseeseseseneseeweseseseseswse
neseesweenweeeewwswee
senwnesewnwwsenenwsewwewswwnwwswew
nwesesewswnwnwsenw
nwnenewnwnwwsenwnwswnwwnww
eeseeeeweneeeseneweneeeeeee
nwweeeeeeeswnwneneneeesenenese
wewwwwwwwwswnwnewswwwwseww
sweneenwswswneewswnwnwneeneneswnew
swsenewwsenesewseneswsenwseneswsesenee
nenwnenwneswsenenenenenewnwne
wwwwwwwwwew
nenenenwnesenwnenesewswnenenenwne
seeswnwsewwnweswneswswseseseseseswsw
swswwenwnweswwseneneewsenwwwe
eeneneenewneeewneeseneneeeneene
nenweenwenenenenesenesenee
eswweeswsenenwnwnwwseswwnwnwneenene
nwswnenwnwneenenwnwneweneswneneenwnene
newneneneeneneneneseenenenenewnwnewne
swwwswwswwwwwwswneww
swnwsenwsewnwnwneeswneeswneneswwnesene
neneneenenwneeswswnenenenenene
wnwswnwsenwnenwnwwnwewnwwnwwnwnwnww
seswnwwesenwwnwneswwnwweenwnwenw
wseseseseseseseseseewesenwseese
seesesesesenwesesweneseweeesesesw
ewnewnesenwswnesenwwsenenwenenenenew
eeenenenenenwneneneswneneneenee
seeeseeneeeseseseseseeeswe
seswseseswneswseswswswswswseswswswse
newwwwwswwswsenenewwwsenwswwww
nenenenwnenwswenenenenenene
nwnwnwnwnwnwnwsenwwwnwnwnwnwnwnwnwnesw
seenewnwnenesewnenesweeneeneneesw
nenewswenwnwnwwnewnwseneneneswenwswsene
nwseesenwnenewnwswswsesenesewsesesesw
sewseseeseseswseswse
wswwswswsweswswswswsenwswneneseswswse
eeeweneseeeeeeneneeweeneee
enesweenwweneneeeseeeeneenewe
wwenwnenwnwswsenwnenwwwnwweswww
nenwenwnwnwnwnwneswnwnwswnwnwnwsenwnwnw
nenwewneeneseswswesw
nwswenwseswswswswsewswswswseseseneswsese
nwswsesesenewsweswsweseswnesew
nwnwnwneneenenwnenenewnenwsenwnenenwnew
nwewwwswswswwwsenwwesweswswswnew
sweseneswswswseswseswseswseswnwswswnwsw
sweswenewneneneneneseneneeenenwnene
swswswswswswswswnwswswswswswswswseeswnwse
swseswenwseseseseswswsesewswseswswsese
enwwwwwseenwewwwnwwwnwwwww
wwswwwwwnwwwwwnenw
eeswenwseeesenweeneeswseseeeese
sweenwwneneenene
enweswseeseeeeeeenweeeseee
wswwwswsweswswswswnewwwsw
nenwswnewnenwnwnwsewnenesenenenenenenw
swwneweseswswswswswwswswneswswswnesw
nenwnenwnwnwnenwnwsenenwnwnwnwnenwnw
wnenenewneenenenwseneneneseneswwe
wseenwnenwneswseneneenwneswnenwswnew
enwwenenenesewsweneswseswsewnenewsw
eweeeeeseneeseswsesenwswsenwweee
seseeeenwseeeseenwseeeeeeee
nwnwneneenenenenwnwnwnwnwnwneneswswnenw
seeeseseseswnwseseneswnwseseswnenwsesee
swswswswswswswswswswswswseewswswswswne
wswwwswwswnwwsew
wwnwwnewwwwswsewwwwwwnwseww
enwnwswewneneseswnenenwswnwnwenwsenenene
seseesesewneswnwsewswenwseneswwsesee
swseswswswsenwswswswswswseswseswnw
seseseswseeseseeseswnwnewseeesesese
nwnenenwnewsewnwswenenwenenene
ewwsesenwneneeesweeeneneeneenenew
swswwneeneswswswswnwswsw
neswswwwswnewwseneswnewwnwweswsew
nwnenewwswnwwwwwesewweswwwsesw
enweewwseeneeseneseenweseneee
weswneeneseneenwnwswweeeneeswwe
enweneeeseseeseww
nenwswnenwnwnwswnwnwenwnenwnwsenenwnenene
wweswseesenwsesenwe
neswnwswnwneneenene
nwnenenewnwswenenwenwnenwnwnenenwnenw
eneneewswnwwseswneswsewnenwwswnewwse
nwsesweeneeweseseseseseenesesesee
seeseseseeeewsenwsesesenwseesesese
neneswnenenwneneeneneneswnwnenenwnenenene
seseswwsesenesesesesesesesesesesenesesese
seneswesenesewneweseseneseseweeesee
eeswswswseesenwsenwnweeeneeneesesw
eeeseeseseesesenwseseseseeseenwnw
swnwswswenwswsewneswseseswwswseswnwe
nwneeenenewsenene
nesesenwneseswseswswwnwseswswseswseseswsw
sesenesewnesesesesesewseseseseesesesw
wnesewsewseseswnwswswsenwswwneswnenewne
eeseeeeeeseesweeeeeenwe
neswsewnwneswwsewneeseswsee
neswseseenenwswneneenwenweneneswew
eeeeswseeeeeenweeeeewene
nwwnwnwnwnwnwnwnwnwnenwswnwnwnw
weeeesewseswsenwnwnwneswnwwnwnwne
weneswswewewswseswswswswwnenwswnesw
nwewnwenwnwnenwnwnwswnenenwnwnwnwnwnw
swswswseswneeswswswwswwswswswswswswswsw
sesewswenwsesewsesewnwnesesesenenwne
eeeeseesweenweseeeneesweee
newswsewnenwnwsewsenw
wswnewwwsewsewwwwswwwsewwnenw
seenwnwnwesenewseeswsew
nenwwwwnwnwnwwsewwnwnwwwwwsenew
eseeeeeeeeneeneeeeeeewseew
nwneweeswnwnenenwweeweswseswene
swswwwswneswswswswswseswsweswswnwswswswsw
nwswesenweeenwsenweewnweseswneee
swswseseswswnwswswswswswswseswswnwseswe
wenewnwwwewwswwweesw
wswswswwwswwnewswswneswseswwwswswsw
nwswwesewsesewnenenwswwwwwwww
eeneswnwseeeeenwweneneswnwswne
wwwswwwnwwewwwnwwwwweswww
sesenwseseseeseswnwsesewsesesenesesese
seseswnwswswswswsesweswswnwswswswseswswsw
enwseseswwseneseeneeseneseewseseew
nwsenwnwnwnewnenwwseswnwsenwww
ewneeeneweeenenweeneeeswenene
swswswswwswneeswesesewneswswnwnewswsw
sewseswnewseneswwnw
wwnwnenenwnweeneneneenwnenenesw
eseeneneneeswnweswesewsewneswwnene
nwnwwnwnwnwnwwnwenwnwswnwnwswnwwnwe
nwsenwseswwewnenwnewnwnwsenesenwnwnw
newswenwseweswwswswswswswneswnwsesww
swwswswseswwswnwsweswnenewwswswswsw
neneneeswneneewneneneeneeeneswenenw
eneeneneeeseweeneene
swseswseseswwneseseswswsweswseseseswsw
eeseeeseeeneseeeeeswseee
eswnwswwswsenwseswswwswseswswneeswsenwsw
swwnwnwswwseswwswwswenewswswwwswsw
seseswseswseneseneeseswseswsesewswswsw
nenenenenenwneswnwnwene
wwwswneweswswwwseswswneswswswswwsw
wswwswneneswwswwsenwnenesewwwswse
nwewwwwwnwnwnwenwsenwnwwnweswswsw
seseeeeeeseseswsenwsenwewseseese
seenwsewseseseseeseseswseswseswsesenw
nwswewwseneneseswseswnwswsenwsenwswnw
swswswswswswneswnweswswswswnwswswswwsesw
eeseeeseseswseweeesenwseeeeese
wnwwwwwwwwwwenwnw
eseseseseswswwneneseneeeswenesesee
swneswnwnewwneeneseseneneneewnenenw
weeeeeenweeeewswneeeeeese
eeenwsweneneesweneneeeeeeee
sewwewwswnwwswswesw
newswneneneneeneeswnew
nenenwnwwseswnenwnwnenwnenwseswneewnenw
nenwnwwnwnwnwsenwnwwnwnwnwnwsenwnwnwnw
wwnwnwwswwwnwwnwnwneewnwnwwsenw
sweswswwneneswesesenwsenwwswseswsesesese
wseseswseseseseseseseesenenwseseswwnwse
wnwnwswwnwnwwnenwwnwwseenwwwwnwsew
wenwseeseseswenwnweeeswneseesese
eenenwewewneneneeswe
swswseswswswnwseeswnwswswsenwswswsenesenw
nwwnwseewnesweeeeeseeeeeeswee
neneswnenenenenenenwenwwseswnenee
swswswewswwwswnewsewswswsw
nwnwwnwnwnwnweeswsenwnwnwnw
swseseswneseswseswseseseseswseswsesw
swsewsenwswswseseswswswswsweseswswswnw
sesenwnwnwnenwnwnwnwnwnwnwnwnwnwnwnwnww
swnesweswswswswswnwwwswswswswwswwsesw
seeeeeeseeseeesweeswnweseswnwenw
neesweeeweeewneeeseneeee
nwwsenenwsenenwwnwnenwwnwnwnwsenenwnenene
seseeseeseeseeneenwseweneswwnwse
sewseseseseseesesesewseseseswseenesese
wnwnesenwwwnenwwneswswwnenwwwwwsw
nwneenenenenenwneseneseneneneswnenwnene
wnenwseewwwwwwnenwswwwswnwwnese
eneewwwsewwnenwnwwnewswnwswsese
sweseswseeneswnenwneseesewewnwwse
eeneeenewweeseseseseseeseseseeee
wnwwnwnwnwwwwsewnwwenwnwnwwwnwne
nwnwnwnwnwnwnwnesewnwnwnwnwnwnwewnwnwnwsw
nenwwneeenenwnwnenwnwwswnenenesenenwne
ewneeneeseweenweeeseeenweenesw
enwweeseesweenwnesweweeeee
seeeseseswseseswswsesewseweswsenwswsene
eneeweeeeeeseswseeeeswenwee
swswnwseswswsenwnwnwewwswswswwnwswese
esenwnwseeeswswenwnwseneenwsenwswsene
nwnwwnwnwnwnwnwsenwnwww
swsesenwseseneswswesesesesenwseseseswsese
eseswswseenwseseseseseseswwse
wneenwnwnwnwnwnenenwswswnenwnesenenwsw
seseeseneeseeseeeswneeswsee
wswwswnewswnwweneseewwwnwwwww
nwwwwwwnewwswwwwweeswnwwsw
sewwwewwseewnewswwwnwnewnww
weseseseneswesenwsesenwswseseswswsenene
nwewnwswnwnenwnwwwnwwweewseswnww
nenenwswwnwswnwnwsenwwnenwwenwnwsew
wseeeseseseeeneseseseswseenwseee
sesesesesesewseseeseseseseesesesenwse
swseeseeeseeeeseswseweenwnwneee
nweswnenwswnwnwweneswswnwsenwnweswnwnenw
newwsewnwnwnwnwnw
wwwswwswwwswwwswwnweswwswwe
wswneswneseseseswsesesenwseseeswnwswsesesw
nwnweneseesesweeneneeneswnewwnew
enwnwwnwnwnwnwnwnwnwnwnenwwnwsesenenwnw
nwwnwwnwwnwnewnwnwsenwnwwesenwnwswnw
neenwewewesweneweeeseswnwee
nwneseseseesweeeeeseweesesesee
nwswenwswnwnwnwnwnwnesenenwswnenwsenwnw
wwwwwswsewenwwwswnesenwwnwwnw
wneswnwnwwwwwnewsewwwwww
swnenenewswwsenwseseswnwseseswseseeseswe
wewwwnwwseewwnwwnenwnwwwww
swwwwwwwwwwnewwwweewww
eeeneeewseweseeeeeeeewe
wnwnwnwnenenenenenenwnesenwnw
nenwswwnwsweneeseweneesw
nenenewnewneeneneeneeneneneene
seseseeseseseenwseenwseseeeseeesww
nenwwsenwsewsewnwnwnwnwwnwnw
seneeseseseseweeeeweseswse
wswswswsweseseswsenwsese
wnewnweenewsewswnwsenwwswswnwnwnese
wwsenenwnewwwwwwswwse
nenwswswswsewseseenwnwsweswswswsenwe
wnwseeswseenwwnenweseswswswswnesww
nenewneneeneseswnenesewnwnesenenenenwnwnw
wenwnenesenwnenewnenenewnenesenenenwne
swswnwswswswseswswswswswswswswswnwseswe
sesesesesesesesesesenwseeseswsewsenenese
wnwwweewwwewwswwwwwwwne
weenwseeeeweswwneesewwwene
wwswwwwwwwwwnwwwnwwnew
swswseswswswnewswsewnenewswswswwwwsww
wewwwnesenwswenwwswwwenweswnewsw
eneneseneswnwneseneswneswenenenwneswwnwne
eneseeneneneeweneneneneneneene
swsewnwewseeneseeswseweenwne
sesenwwseeswswseseseswsweswseswswswswsw
neneeneneneneneneneneneswneswnwneneneene
seseesesenwsesesesesesesesese
neneenwnenwnwnwnewnwenenwnenwseneneswnw
neeweeewneeeeeeeeeseeesee
nwwwswswnwewnwnwwwnwewnwe
wwwwwnewwswwwwse
seswneneenewwnenenenenwnenesenenesewne
wsesenwnwswneeswswseseswsweseenwswnwsw
wseseneneswnenenwwnenwnwnwnewnwnwnwsenw
seseseseswseseseseneswsesesesesenwsesese
eeswswswnwseswsewnwswnwswnwswe
wswswesewswweswswswwnwnwnesw
neeneeneeewnewseeneseeneneeeee
seesenwnesenwseseseseneswsesesenwsesesesw
neswswwsenwseseseseswseseneseswnwwswnese
nenesenwneneenenenewnwnenenwnwnenenenew
wwswswwswnwswwswwswwwswseswsw
wnwsesenewsewwswswnwsweswswenewswnesw
eeeseswneesweenweenw
senwswenesewnesenwswswweswswswseswnee
wnwwwsewnwnwwswnenww
neneneswswnenenenenweswneswneenenenenwne
seseseseseenwsesee
nwnwneneswenwwwsenewnesenewseswwse
neswseweewenwewwwnenwsenesesesee
wsewnenewewwwswswnwswwwewnwwwsw
nweeeseweswseseewneeeseeenenwe
wswnwenwenwwnenwswseswenwwnwnwesenwne
seneswswneseseseswwseseseseseseseseseswse
ewnweseseseseneeesewneewsweeneese
seneneneneneneewnenewsenenewwsesew
wwnwswwswsesweswwwwwswswswswnesw
nwswnwswnwnwnwenenwnwnenwwnwnwenwnwnw
seeneseeeeneneeneneneweneeenwnwe
nenesewnwnwnwseswsenwnwsweswwwsenenwne
seseseeweeeseseeeneseneseseesesesw
nwneeneneneeseneeeneneenenewnesenee
sesenwneswseswswswenenwswnwswswswswswsw
nwwwnwnwsenwwwnwnwwnwwnwnwewnwsw
nenenwseneswnenesenenenenwnenenenenwnwwne
swswswswwweswwwswneswswwwswswswsw
swswwswswwswnwswneseswswnewswwseseswswsw
nwsenwswsweseseseseseseenwseswswseswsesesw
ewnwswswneneswneseneeswswwnwseneswne
wwwwwsewwwwsewneewnwwwww
sewneswseseswnweeseeeeeseeneesewse
seswneswswwswswseneswse
nwneswnwnwnwnwnwnwnwnwenenwne
wwewwwwwwwnwweseswswwwwnwsw
eeswseneenweeenwnweeseeeenenwsw
swswwwnwwswnwwwewweswewnwnwsewsw
nwwsenwnwnwwnwwwnewesesw
wwwnewnewwwnwwsenwsewwwwwww
swsewswswseswsewseeneswseneswseswswswsw
nwnenwnwnwnenwsenwnwenwnwnwswswnwnwwnwnwnw
sweeswnewwwnwnweseneswsewnesewswnw
swneseseeswseneswnwsw
swweswnewswswwwswseneswnwwswnwsesesw
eenwnwnenenewswswnwneenwnenwnwswnwne
eseseseseeseswseeseseseneseeseseenwew
swsweeneswswswnwwswswswwswwnwswsweswsw
swsweswseswseswnwsesenewnenwswneswswswsw
seswsesenweseseeeseenwseee
seseeseeneeseseswsenweseewsesesesee
swnwnwnewnesenenwnenesenwnwnwwneneenwnw
seswswsesenwswseseseneswseseweenwswsw
wnwnwnwnwnwnwwwnwwnenwnwnwsw
nwnwswnesenwneewnwnwnwnweneseneeww
seswwswneswswseswswswneseswswswswswswsw
newwnwsesenwnenenwnenenwwenwsenenwswnwe
eenewneseesweenwneesenwwsenweese
seewswwwnwwseswswwnwswenenewnew
seseseseseeewnenwee
eeeeswwneneweneewenenweewe
wsenenwswenenwesenwneswsenesenwneswnw
nwnenenenenenenenwneswnwnenewswnwenee
newswseseenweesenweswsewwseeenenw
swsenenwnwnesewwwnwwwnwwsewnewnww
neneneneneneneenenwnenwweneswnenewne
swswseenwwsweswswswswswswewenwswwsw
neeeeneneenewnewneneneseeenene
senwnesenwseswswsesesesenesewwswseseswne
wwsenewswewnwwwwwwnwwwswswswww
eswwwwnenweweswewwwswnwnwsww
nenwnwwnwnwsenwnenwnwsenwwnwnwnwnwnwesw
eneseeneeneeseeneneeewnewneee
eenenwnwneneneeswnweswseeenwneeesw
senwseswswswnenwnwswwseesweeseswswsw
swwnewswsenwwwwwwwnwsenwnwwnewnew
nwnwnwnwnwnwseswnwnwnwnwnenwnenwnwnwnwnw
swnwwswsenwnwwnwnwwnwenenwnwsenwnenwne
nenenwnenewewnenwneeeeswswneese
eeneeneeneneneeesweenwneneeswee
swseswswnwseswseseseswswseswswswswneswsw
wwewwwenwewnewwswwwswnwww
wwnenwwsenwnwnwwwnwwwwwenwnwnww
nwnenenenwnwneenenwnenwwsenwwnwnwnwnene
swswsweswwwwswwwwwwsw
eeneeeneswenenweenenene
eseeswnwswneeeseenwsewseeeenwnwe
seseseseseswsesesenesesesesewwwseesee
esweeseseseseeenwsesesenweeeswe
wwnewwenwnwsewswwnwnwwnwwwnww
nenenesenenenenenenewnwnenewenenenene
nweeeseeseweeenwnwsweeeeee
senwnwnwnwwswnwenwnwwnwnwnwenwneswnw
nwnwswnenenwnwsewsenwswsewsewnwnenenwnene
wneewwwsenwewnwnwesewewnwwwsw
swswneswswswwenwwseswseswnwswswseswswse
swwswswswswswneswseswswswwswswneswsww
wwseswswswswneswswswswswswswswswnwsww
newwwsenewswswswwsw
neneenenweneneneeneneenwneneswseswne
eeesesesesesewseseenew
weweneswsweeenenwewneeswseenene
swnewneneseeeeweneeenwnenwweswsw
seswsenwseesesenwseswsesesese
eeweeseeeeeeneeee
nwnwnesenenenenewnenwnwnwwene
neseswswseeswseswswswseseneswnwseswsesw
nwnwenwnwwwwnweweewwsewswswwnwe
nesesenwewenwseseeseswseswseneeese
ewnwwsenewenwwweewwnwwnwwnw
nesewnwnwnwswwwswnwwnwsenwnwwnwnenewnw
sewsesesewswseseneesesesesese
newnwnwsesenenenwsenenwwwnwsenwnesenwnwse
esesenwesesenweseseseseseswswseesesese
sewwwswswneswwnewwsweewwwwnwsww
swsewwwswwwswnwwnwwwwwewwww
nenwswneneneneenwneewnesesenenenenenee
nwnwnwnwneswsenwnwnwnwnwnwnwwnwenwnwnwnwnw
eeeeesweeeeewseeeneneeswe
nwnwnwnesesewnwnwnwwnwsenwwnwwnwnwnwne
nenwneeneneewneeneeneneneswneeee
seneswneneeswswswseseswseseseenwwswsesw
swnesweswseswsenwsenwewswsenwnesenwse
seseseeswsesesesewsesesenesesesenwsenesese
wnwnenwnwwnwwwwnwseewwnwwewsew
nwnwwnwnwnwwnwenwnwwnwnwnwnwnww
sewsenwnenwnewnwnwnenwnwnwnwwnenwnwenw
nwewwnesewwwwwsenwwwnwnwwwwsww
swnwswswwswswsesewswswwwewnwswswsw
swseneseseseswseswseswwswseswsesw
swwnwwswnwnenwnwnwewsewewwnwwnw
nwnwwnwnwwwwnwsesewnwnwnwnw
wwnwwwenwnwseswwenwnwnwnwenwnwnwnw
nwnwnenwnwwnwnwneesenwwnenenenwseswne
swneenwswwsenwseswswswsenweseswneswseswse
swsweswsewsweneswswswsenwseswsese
eseeswnweeeseeeseswneesesesesesee
nweswwewswnwewnwwnewsenwswwwwnw
nwnenenwswneeeswewseneswneswseeenw
wnwwswwnwnwswenenwwenwwnwnw
eeeeneeeswnweeswenweeneeene
swseeeweswnwneewwswnwswswesenwswnw
seseswsesweseswsewswesesenwseseswsesw
wnwwwnwnwwsenwnwnwnwnwnwwwwnenw
wswnwwwwswwewswseswwwwneneseswww
neseeeneenenwnweswene
wwwwwwwwnewwwwswnwesewwe
swnesewenesesewneweswnwswenw
wsweeenwseswenwsenenweenwsee
neneenwnwnwsenesenenenenenwnewsenwseswnesw
wnwnwnwswnenenenwneneneneneenwsenenenenw
swswswswswseneswswswswswwswswswswswnesw
sewnenwneneneenenenwnwnwwnwnenenenenwne
swwnwswewswswnwswneswswwswswswwsesw
wseenwseesewseesesesene
wsenweweeneeeneeneewseeeenee
wswswwwswswwswswsweswwswnewswewsw
wnewwwwnwseweswwswwwswwswwww
wnwswnwseswswwswwwewewwswnew
senweeeeeeewsweneeneeeeee
sweeseeseeneswenwenenwnwenesenenwsw
seenweseseseseseseseseseseesenewneswsese
ewnweneeseeneeeeeneeeneenee
nenwwsenwenwswnesewnwnenenesewswnene
sewseswswswseseswswsenwseseswsesesesene
nesenenwswswseswsenwneswswswseewwsew
wnwnwnwnwwseeneneeswnewenwnwnwsenwne
neneeneneswwneeenwneenee
esenwenewneeweneneesesweesewe
nenwnwnwnenenwnwnwnesenwnewnw
nwenwswenwnwnwnwswenwsenwnwnwnwwnenwwnw
wnenesenenenwnesenwnwnenenesenene
eseeeeseewenenewnwsweeneenwee
swswnewneseswseswwseneneneneswwswneswne
enwenwwwswnwsenewe
enwwswwseswwww
nwnwswswnenwnenwnenwnwnwsenenenenenenenenwe
wswwneswsenwnwnewwsweew
seswseseseseeesesenweesesewesesenwe
newswswswnenenwnwenenenwsenenwswnwwe
nwneneeeneneneeswwenenenweeesesene
wneneneseeneneeswwneneneswnenenenenene
nwneeneneewneneneneneneneneswnenene
nwnwneswnenwenewenenwnenewnwnesenene
nwnenwenwswsenesesenwseneenwnwnwwnwsw
swneweswswwwwswwwweseseneeww
nwwnenesesenenenenenwnenwnewneneenene
sesenwswseseseseseswenwseswswseswsesese
newneeneneeweseneewneneneweeee
newnwwswswwwswswwewesewwwwwnw
nenwenenenewnwnenwnenwsenenenewnwnenwne
nwnenwsenwnenwnwnwnwnenwnenenesenewnwnene
wnweswnwneenwwwsenwnwsenwenwsenesesw
enesenesenwwsweswneneswnenesenewswswnww
nwnenwnesenwnenenenwnenenwseswnwnwnewnwnw
nwswseneseseseswseseswswsesewnwswseseesw
nwnwnwnwnwwsenwnwnwsenesesewnw
neneneeneneeneneneenewnenenesenenenesw
wsenenenwnenwnwnwwnenwnwsenwneenwnenww
swwsenewneswseswnewww
wswnwswswseswswswsweseneneseeswswnesew
seneenenewswneneneenenenenenenenenene
wnwnwnwsewesenwwwnewwwesww
newswsewweenwewwnwswneeenwnwswnw
neneneeswneneneneeeenene
nwswwsenwwnwnwnweenwnwwewnwnwswnwne
nwnwnenwneeeenesewnwswswsenwnwnwwnw
ewnwneswseneeneenweneseesenenenww
nwnenenwnwenwnwnesewnenewnwswneseenene
neeweneneeneeneenenewneeeneneswse
nwneswnwseseswswesewnwwswswswneesewe
swswneswswsenwwswswwswswnwswswswswese
swswneswswenewsweneswwwswnwse
eeeeseeeeeeseewenese
wewwwseswwwswwwwnwewnwwwww
senwnwnwnwnwnenwwnenwswnwnwnenwnwnenwnwnw
wwwsenwwswwweweswneswnwswwsww
newwwwewwwwwwwewwwwwwse
eeneeeeeweneneeeeeneweee
seseswneseswnewsewseseseneseneseseswsew
seeswswseswswswswseswswswseswswwswnwse
sesewwseseseseseseneseseseesesesenwsese
swewnwnenewswwewseswesenenwnwwnwwnw
swenwseswwwswswwswswwwwenwnewsw
swsesenwesesesenesesenesenwsew
swwswswwnwswwwswewswwnwswewwwe
wswseeneswesewneswswwsewenew
swwsewnwwewwswwwnwwswswsw
enweeeseneeeeneeeeee
sweeeseeswenwenweeeeeeeeeee
sewnwnwswswseeswsweswswsweswswswswsenesw
swwswwswswwswwneswwswswsw
seswnewneenesenwnesenwweneeneswew
wnwesenwsenenweseseseswsesenesewswsene
swwwwswwsewswwwneswwww
wswwwswwswswewwwswwwewswwsw
esewswswswswswswnewswswneswswnwswseswsw
nwsenwnwnesenenenenewnwnwnenenwnenenenene
swneneeneeseswnwneswwwneneenenenenenw
swswswswwnwsweswswswswswesenwswswnesw
eswswswwwswswnwweswswswwnweswswswnw
seneneneeeneeneewswneeeenenenee
swswswswsesweswswswnewswswswswswswnesw
nwswnwewswwswwnwwneweenwnewnwe
newseneswewnwseswnesesenwswneswswswse
swwwwnwwewenenwwseww
swsewneswseseseseseswnwsesesewenenwese
sewsesweewseneeeseeseeeweee
eeeewneseeeeeeswneeesweswne
nenenwsewsenesesenwwwsenenwnwseneswnenww
eeseesesesesewsesesesese
newneenenwnesweseneneenenene
swswnwweswneseseswnwswseswseseswswswse
nwswwnwsenweseswswseswswswsw
nwwnwnwwnwwnwnesewnesewsenewnwwswnw
swnenwwnenenenenweseswsenenwenewnwswe
nwnewnwseseswsewwneswneseseeswsesesenwse
nwwnwwswnwnenwnwnwnwwsenwenwnwnwnwsw
seeseeesenwweeeneweseee
nwwwwwwsewwwswnewwwwwwww
nwnwnwwwnwwwsewwneswnweewwsww
esenwnenewnenenwnenenwnenweeseesenese
wnenenenenenenwneenenenesenenenenenenew
eswneeneeeneeneswnenenwneeeeenee
wswseswsenewswwnwswwwswswwwswnesw
swswsesesenewswneseseswswwneswswsw
sesewswsenwswneenenenweswee
seswswswswswswswneseswnwewswseswswswsw
sesenwseseswswseswswsweseswswsenwsesesw
eswswswseswnwswswswswseseswswswnesewsesw
enenweeneweneneeeesweenenesene
esenenwneswsenweswwwnwnenwnwnwwnwwnw
swswesewswswswnwnwswwswswswweswswwsw
seeseseseseneenwsesewnesenesewsesew
eseswseseeswesenweenenweeseeeese
senwnwswwwwwwseseneswsewswswneswnw
esenwwwseswseseneenwe
swneswseseswseswneneswwswswswseswswswnwsw
swwwneswwswswswswneswesw
nweeeneseseeeeeenenweeenwesw
nesenwswnenwnwnwnwsenwneenenwnenenwnenw
neeeeeswneesewnenenwe
swsesesesesesesesenesewsesesese`

  const puzzle2 = `sesenwnenenewseeswwswswwnenewsewsw
neeenesenwnwwswnenewnwwsewnenwseswesw
seswneswswsenwwnwse
nwnwneseeswswnenewneswwnewseswneseene
swweswneswnenwsewnwneneseenw
eesenwseswswnenwswnwnwsewwnwsene
sewnenenenesenwsewnenwwwse
wenwwweseeeweswwwnwwe
wsweesenenewnwwnwsenewsenwwsesesenwne
neeswseenwwswnwswswnw
nenwswwsewswnenenewsenwsenwnesesenew
enewnwewneswsewnwswenweswnenwsenwsw
sweneswneswneneenwnewenewwneswswnese
swwesenesewenwneswnwwneseswwne
enesenwswwswneneswsenwnewswseenwsese
wnwnesenesenenwwnenwsewesewsesesew
nenewswnwewswnenesenwnesewesw
eneswnwswnwsenenwnwnwwseeswneewsenese
neswnwewnwnwseenwseesewsenwsweewe
wseweeenwnesenwwwswnew`;


  const puzzleArr = puzzle.split('\n')

  const answer1 = (function () {
    const map = puzzleArr.map((line, i) => {
      let x = 0;
      let y = 0;
      const arr = line.split('');
      for(let i=0,max = arr.length; i < max; i++) {
        switch(arr[i]) {
          case 'w':
            x -= 2;
            break;
          case 'e':
            x += 2;
            break;
          case 'n':
          case 's':
            switch(`${arr[i]}${arr[i + 1]}`) {
              case 'nw':
                y += 1;
                x -= 1;
                break;
              case 'ne':
                y += 1;
                x += 1;
                break;
              case 'sw':
                y -= 1;
                x -= 1;
                break;
              case 'se':
                y -= 1;
                x += 1;
                break;
            }

            i++;
            break;
        }
      } 

      return [x, y]
    }).reduce((map, [x, y]) => {
      const key = `${x},${y}`;
      map.set(key, !map.get(key))
      return map;
    }, new Map<string, boolean>())

    let sum = 0;
    map.forEach(bool => {
      if (bool) sum ++;
    })

    return { map, sum };
  }())
  console.log('part1', answer1.sum);

  const answer2 = (function () {
    const adjacentList = [
      [1, 1],
      [1, -1],
      [2, 0],
      [-2, 0],
      [-1, 1],
      [-1, -1]
    ]
    let map = answer1.map;
    let sum = 0;
    for(let i=0; i < 100; i++) {
      process.stdout.write(` ${i}%\r`);

      const extendMap = new Map<string, boolean>();
      // 擴展
      map.forEach((bool, key) => {
        const [x, y] = key.split(',').map(s => +s);

        extendMap.set(key, bool)
        adjacentList.forEach(([x2, y2]) => {
          const key = `${x + x2},${y + y2}`;
          const tile = map.get(key);
          extendMap.set(key, !!tile)
        })
      })
      
      
      const flipMap = new Map<string, boolean>();
      extendMap.forEach((bool, key) => {
        const [x, y] = key.split(',').map(s => +s);
        const blockCount = adjacentList.filter(([x2, y2]) => {
          const tile = extendMap.get(`${x + x2},${y + y2}`);
          return !!tile;
        }).length

        if (bool) {
          flipMap.set(key, blockCount === 0 || blockCount > 2 ? false : true);
        } else {
          flipMap.set(key, blockCount === 2);
        }
      })
      
      sum = 0;
      flipMap.forEach((bool) => {
        if (bool) sum ++;
      })

      map = flipMap;
      // console.log(`Day ${i + 1}: ${sum}`)
    }

    return sum;
  }())
  console.log('part2', answer2);

  console.timeEnd();
}

day24()